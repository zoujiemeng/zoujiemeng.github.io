---
layout: post
title: "C/C++与Java的混合编程"
tagline: ""
description: "C/C++与Java的混合编程"
category: mix
tags: [C++,Java,jni]
last_updated: 2017-03-30
---

Java可以通过jni作为一个中转库，来调用C/C++的代码。并且通过VS可以实现联合调试，具体的操作方法如下。

1. Java中写好类名和native方法名
2. 命令行中cd到上述类的.java文件路径，利用javah生成相应的头文件x.h
3. 在VS中新建空项目，c/cpp中需包含头文件`jni.h`，`x.h`，同时c/cpp中的jni函数声明须与x.h中的函数声明一致
4. 打开项目属性页，C++->附加包含目录中加入JDK安装文件夹中的`\include`以及`\include\win32`
5. 编写好jni函数及相关C/C++函数后，生成对应环境（x86或x64）下的dll，将其置于Java项目根目录，然后在Java源代码中使用`loadlibrary`加载该库（在Linux环境下会有区别）
6. 进入Java的debug模式，在调用出打断点，运行后切换至VS，选择附加到javaw进程。然后即可在VS中进行断点调试

